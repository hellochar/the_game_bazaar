<html>
    <head>
        <link href="{{ STATIC_URL }}the_game_bazaar/css/bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="{{ STATIC_URL }}the_game_bazaar/js/jquery-1.6.1.min.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}the_game_bazaar/js/play.js"></script>

    </head>
    <body>
    	<!-- START NAVIGATION BAR -->
        {% include "the_game_bazaar/navbar.html" %}
        <script type="text/javascript">
        	//mark page's active tab
            $('#navbar-play').addClass('active');
        </script>
        <!-- END NAVIGATION BAR -->
        <div class="container">
	        <div class="page-header"><h1>Join!<small> or </small>Host!</h1></div>
	        <div class="row">
	        	<div class="span10">
                    <div id="play-join">
                        <button id="play-host-button" class="btn btn-primary pull-right">Host a Game</button>
        				<h3>Join A Game:</h3>
        				<table class="table table-striped">
        					<thead><tr>
        						<th>Game ID</th>
        						<th>Map Name</th>
        						<th>Players</th>
                                <th></th>
        					</tr></thead>
        					<tbody>
            				{% for game in games %}
            					<tr>
            						<td>{{ game.id }}</td>
            						<td>{{ game.map_id.map_name}}</td>	
            						<td id="game-{{ game.id }}"></td>
                                    <td>
                                        <form action="/game/join" method="POST" style="margin:0px">
                                            {% csrf_token %}
                                            <input name="game-id" type="hidden" value="{{ game.id }}" />
                                            <button class="btn">Join</button>
                                        </form>
                                    </td>
        							<script>
        								printPlayers({{ game.id }}, $.parseJSON('{{ game.players }}'.replace(/&quot;/g, '"')));
        							</script>
            					</tr>
            				{% endfor %}
            				</tbody>
        				</table>
                    </div>
                    <div id="play-host">
                        <button id="play-join-button" class="btn btn-primary pull-right">Join a Game</button>
        				<h3>Host A Game:</h3>
        				<table class="table table-striped">
        					<thead><tr>
        						<th>Map ID</th>
        						<th>Map Name</th>
        						<th># of players</th>
                                <th></th>
        					</tr></thead>
        					<tbody>
            				{% for map in maps %}
            					<tr>
            						<td>{{ map.id }}</td>
            						<td>{{ map.map_name }}</td>
            						<td>{{ map.num_players }}</td>
                                    <td>
                                        <form action="/game/host" method="POST" style="margin:0px">
                                            {% csrf_token %}
                                            <input name="map-id" type="hidden" value="{{ map.id }}" />
                                            <button class="btn">Host</button>
                                        </form>
                                    </td>
            					</tr>
            				{% endfor %}
            				</tbody>
        				</table>
	        		</div>
	        	</div>
	        </div>
		</div>
	</body>
</html>
